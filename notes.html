<!DOCTYPE html>
<html>
<head>
    <title>Список заметок</title>
    <script>
        async function loadNotes() {
            const response = await fetch('/notes');
            const notes = await response.json();
            const list = document.getElementById('notesList');
            list.innerHTML = '';
            notes.forEach(note => {
                const li = document.createElement('li');
                li.textContent = note.text + ' ';

                // Кнопка "Удалить"
                const btnDelete = document.createElement('button');
                btnDelete.textContent = 'Удалить';
                btnDelete.onclick = async () => {
                    await fetch('/notes/' + note.id, { method: 'DELETE' });
                    loadNotes();
                };
                li.appendChild(btnDelete);

                // Кнопка "Редактировать"
                const btnEdit = document.createElement('button');
                btnEdit.textContent = 'Редактировать';
                btnEdit.onclick = () => {
                    const input = document.createElement('input');
                    input.type = 'text';
                    input.value = note.text;
                    const saveBtn = document.createElement('button');
                    saveBtn.textContent = 'Сохранить';
                    saveBtn.onclick = async () => {
                        await fetch('/notes/' + note.id, {
                            method: 'PUT',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ text: input.value })
                        });
                        loadNotes();
                    };
                    li.innerHTML = '';
                    li.appendChild(input);
                    li.appendChild(saveBtn);
                };
                li.appendChild(btnEdit);

                list.appendChild(li);
            });
        }
        window.onload = loadNotes;
    </script>
</head>
<body>
    <h1>Список заметок</h1>
    <ul id="notesList"></ul>
    <a href="/">Назад</a>
</body>
</html>